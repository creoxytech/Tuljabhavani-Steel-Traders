<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Chatbot - Shri Tuljabhavani Steel Traders</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { font-family: 'Inter', sans-serif; }
.chat-container { height: 400px; overflow-y: auto; }
.message { margin-bottom: 1rem; }
.user-message { text-align: right; }
.bot-message { text-align: left; }
.typing { animation: typing 1s infinite; }
@keyframes typing { 0%, 50% { opacity: 1; } 51%, 100% { opacity: 0.5; } }
</style>
</head>
<body class="bg-gray-100">
<div class="max-w-2xl mx-auto p-4">
<div class="bg-white rounded-lg shadow-lg p-6">
<h1 class="text-2xl font-bold mb-4">Steel Cutting Assistant</h1>
<div id="chat-container" class="chat-container bg-gray-50 p-4 rounded-lg mb-4">
<div class="message bot-message">
<div class="inline-block bg-blue-500 text-white p-3 rounded-lg">
ü§ñ Hi! I'm your AI assistant for Shri Tuljabhavani Steel Traders. Ask me anything about laser cutting!
</div>
</div>
</div>
<div class="flex gap-2">
<input id="user-input" type="text" placeholder="Ask about laser cutting services..." class="flex-1 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"/>
<button id="send-btn" class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600">
<span class="material-symbols-outlined">send</span>
</button>
</div>
</div>
</div>

<script>
const chatContainer = document.getElementById('chat-container');
const userInput = document.getElementById('user-input');
const sendBtn = document.getElementById('send-btn');

const GEMINI_API_KEY = 'AIzaSyBJmXfuGhiB3X_wJQxQxQxQxQxQxQxQxQx'; // Replace with actual API key
const GEMINI_MODEL = 'gemma-2-9b-it';

const companyContext = `
You are an AI assistant for Shri Tuljabhavani Steel Traders, a laser cutting company.
Company Details:
- Services: CNC Laser Cutting with 12kW power, 13m x 3m bed size, ¬±0.1mm precision
- Materials: Mild Steel (25mm), Stainless Steel (20mm), Aluminium (16mm), Brass (10mm), Copper (8mm)
- Contact: +91-9960290333, ststeeltrader@gmail.com
- Location: Rabale, Navi Mumbai - 400708
- Hours: Mon-Sat 9AM-7PM
- Capabilities: Precision cutting, custom solutions, prototype development, CAD support
- Turnaround: Standard 2-3 days, Rush same day, Prototypes 24 hours
- Payment: Cash, Bank Transfer, UPI, Credit terms available

Always be helpful and provide accurate information about our laser cutting services.
`;

function addMessage(message, isUser = false) {
  const messageDiv = document.createElement('div');
  messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
  messageDiv.innerHTML = `
    <div class="inline-block ${isUser ? 'bg-gray-300' : 'bg-blue-500 text-white'} p-3 rounded-lg max-w-xs">
      ${message}
    </div>
  `;
  chatContainer.appendChild(messageDiv);
  chatContainer.scrollTop = chatContainer.scrollHeight;
}

function showTyping() {
  const typingDiv = document.createElement('div');
  typingDiv.className = 'message bot-message typing';
  typingDiv.innerHTML = `
    <div class="inline-block bg-blue-500 text-white p-3 rounded-lg">
      <span>‚óè</span> <span>‚óè</span> <span>‚óè</span>
    </div>
  `;
  chatContainer.appendChild(typingDiv);
  chatContainer.scrollTop = chatContainer.scrollHeight;
  return typingDiv;
}

async function callGeminiAPI(userMessage) {
  try {
    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_MODEL}:generateContent?key=${GEMINI_API_KEY}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        contents: [{
          parts: [{
            text: companyContext + '\n\nUser: ' + userMessage
          }]
        }]
      })
    });
    
    const data = await response.json();
    return data.candidates[0].content.parts[0].text;
  } catch (error) {
    console.error('Gemini API Error:', error);
    return 'Sorry, I\'m having trouble connecting right now. Please contact us directly at +91-9960290333 or ststeeltrader@gmail.com';
  }
}

async function sendMessage() {
  const message = userInput.value.trim();
  if (!message) return;

  addMessage(message, true);
  userInput.value = '';
  
  const typing = showTyping();
  
  try {
    const response = await callGeminiAPI(message);
    typing.remove();
    addMessage(response);
  } catch (error) {
    typing.remove();
    addMessage('Sorry, I encountered an error. Please try again or contact us directly.');
  }
}

sendBtn.addEventListener('click', sendMessage);
userInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') sendMessage();
});
</script>
</body>
</html>